<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·∫£i Ph∆∞∆°ng Tr√¨nh & H·ªá Ph∆∞∆°ng Tr√¨nh - T·ª´ng b∆∞·ªõc chi ti·∫øt</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Roboto, system-ui, -apple-system, sans-serif;
            background: #ffffff;
            color: #1e293b;
            line-height: 1.5;
            padding: 24px;
            min-height: 100vh;
        }

        .container {
            max-width: 1440px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 24px;
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.1);
            border: 1px solid #f1f5f9;
            overflow: hidden;
        }

        .header {
            padding: 24px 32px;
            background: #ffffff;
            border-bottom: 1px solid #e9eef3;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 16px;
        }

        .header-left {
            display: flex;
            flex-direction: column;
        }

        .main-title {
            font-size: 28px;
            font-weight: 600;
            color: #0f172a;
            letter-spacing: -0.01em;
        }

        .subtitle {
            font-size: 15px;
            color: #475569;
            margin-top: 4px;
        }

        .print-btn {
            background: #f8fafc;
            border: 1px solid #cbd5e1;
            border-radius: 40px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            font-weight: 500;
            color: #1e293b;
            cursor: pointer;
            transition: all 0.2s;
        }

        .print-btn:hover {
            background: #eef2f6;
            border-color: #94a3b8;
            box-shadow: 0 4px 8px rgba(0,0,0,0.02);
        }

        .print-btn svg {
            width: 20px;
            height: 20px;
            stroke-width: 2.2;
        }

        .content {
            padding: 32px;
        }

        .type-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 32px;
            background: #f8fafc;
            padding: 16px 20px;
            border-radius: 60px;
            border: 1px solid #e2e8f0;
        }

        .type-btn {
            padding: 12px 24px;
            border: none;
            background: transparent;
            border-radius: 40px;
            font-weight: 600;
            font-size: 15px;
            color: #334155;
            cursor: pointer;
            transition: 0.2s;
            white-space: nowrap;
        }

        .type-btn:hover {
            background: #e2e8f0;
            color: #0f172a;
        }

        .type-btn.active {
            background: #0f172a;
            color: white;
            box-shadow: 0 6px 14px rgba(15, 23, 42, 0.2);
        }

        .input-section {
            background: #f9fbfd;
            padding: 28px 30px;
            border-radius: 28px;
            margin-bottom: 36px;
            border: 1px solid #e9eef3;
            transition: 0.2s;
        }

        .input-section h2 {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #0f172a;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-section h2:before {
            content: '';
            width: 6px;
            height: 26px;
            background: #0f172a;
            border-radius: 8px;
            display: inline-block;
        }

        .equation-display {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
            font-size: 20px;
            text-align: center;
            margin: 24px 0;
            padding: 20px;
            background: white;
            border-radius: 24px;
            border: 1px solid #dde3e9;
            color: #0f172a;
            font-weight: 500;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 24px;
            margin: 28px 0 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-group label {
            font-weight: 600;
            color: #334155;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .input-group input, .input-group select {
            padding: 14px 16px;
            border: 1px solid #cbd5e1;
            border-radius: 20px;
            background: white;
            font-size: 16px;
            transition: 0.15s;
            font-family: 'JetBrains Mono', monospace;
            text-align: center;
        }

        .input-group input:focus {
            outline: none;
            border-color: #0f172a;
            box-shadow: 0 0 0 4px rgba(15,23,42,0.08);
        }

        .matrix-input {
            margin: 24px 0;
            background: white;
            padding: 24px;
            border-radius: 28px;
            border: 1px solid #e2e8f0;
        }

        .matrix-row {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .matrix-cell {
            width: 90px;
            padding: 14px;
            border: 1px solid #cbd5e1;
            border-radius: 20px;
            font-size: 16px;
            text-align: center;
            background: white;
            font-family: 'JetBrains Mono', monospace;
        }

        .matrix-cell:focus {
            border-color: #0f172a;
            box-shadow: 0 0 0 3px rgba(15,23,42,0.08);
            outline: none;
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 28px;
        }

        .btn {
            padding: 16px 28px;
            border: none;
            border-radius: 40px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: white;
            border: 1px solid #cbd5e1;
            color: #1e293b;
            flex: 1 1 auto;
        }

        .btn-solve {
            background: #0f172a;
            border: none;
            color: white;
            box-shadow: 0 10px 20px -8px rgba(15,23,42,0.3);
        }

        .btn-solve:hover {
            background: #1e293b;
            transform: translateY(-2px);
        }

        .btn-example {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .btn-example:hover {
            background: #e2e8f0;
        }

        .btn-clear {
            background: #fee2e2;
            border-color: #fecaca;
            color: #991b1b;
        }

        .btn-clear:hover {
            background: #fecaca;
        }

        .btn-random {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .btn-random:hover {
            background: #e2e8f0;
        }

        .result-section {
            background: #ffffff;
            padding: 32px;
            border-radius: 28px;
            border: 1px solid #e9eef3;
            margin-top: 32px;
            display: none;
        }

        .result-section.show {
            display: block;
            animation: fadeInUp 0.4s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 28px;
            padding-bottom: 16px;
            border-bottom: 2px solid #e2e8f0;
        }

        .result-header h2 {
            font-size: 26px;
            font-weight: 600;
            color: #0f172a;
        }

        .type-indicator {
            background: #f1f5f9;
            padding: 8px 22px;
            border-radius: 40px;
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }

        .steps-container {
            background: #f9fbfd;
            padding: 24px;
            border-radius: 24px;
            margin: 24px 0;
        }

        .steps-container h3 {
            font-size: 18px;
            margin-bottom: 18px;
            color: #0f172a;
            font-weight: 600;
        }

        .step {
            padding: 16px 20px;
            background: white;
            border-radius: 20px;
            border-left: 6px solid #0f172a;
            margin: 12px 0;
            font-size: 15px;
            box-shadow: 0 4px 10px -4px rgba(0,0,0,0.02);
        }

        .step-number {
            font-weight: 700;
            color: #0f172a;
            margin-right: 14px;
            background: #f1f5f9;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 13px;
        }

        .solutions-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 28px 0;
        }

        .solution-card {
            padding: 24px 28px;
            border-radius: 24px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 20px;
            font-weight: 600;
            background: #f1f5f9;
            border: 2px solid #0f172a;
            color: #0f172a;
            flex: 1 1 220px;
            text-align: center;
            box-shadow: 0 10px 20px -10px rgba(0,0,0,0.08);
        }

        .analysis-container {
            background: #f9fbfd;
            padding: 24px;
            border-radius: 24px;
        }

        .analysis-container h3 {
            font-size: 18px;
            margin-bottom: 18px;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
        }

        .analysis-item {
            background: white;
            padding: 16px 20px;
            border-radius: 20px;
            border-left: 6px solid #0f172a;
        }

        .analysis-label {
            font-weight: 600;
            color: #475569;
            font-size: 13px;
            text-transform: uppercase;
            margin-bottom: 6px;
        }

        .analysis-value {
            font-size: 16px;
            font-weight: 500;
        }

        footer {
            padding: 24px 32px;
            text-align: center;
            border-top: 1px solid #e9eef3;
            color: #64748b;
            font-size: 14px;
            background: #ffffff;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 800px) {
            body { padding: 12px; }
            .type-selector { border-radius: 30px; }
            .btn { padding: 14px 20px; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="header-left">
            <div class="main-title">Gi·∫£i Ph∆∞∆°ng Tr√¨nh & H·ªá Ph∆∞∆°ng Tr√¨nh</div>
            <div class="subtitle">Hi·ªÉn th·ªã t·ª´ng b∆∞·ªõc gi·∫£i chi ti·∫øt ¬∑ Giao di·ªán tinh t·∫ø</div>
        </div>
        <button class="print-btn" onclick="window.print()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 9V2h12v7M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2m-2 4H8v-4h8v4z"/></svg>
            In ƒë·ªÅ thi
        </button>
    </div>

    <div class="content">
        <div class="type-selector">
            <button class="type-btn active" data-type="quadratic">B·∫≠c 2</button>
            <button class="type-btn" data-type="linear">B·∫≠c 1</button>
            <button class="type-btn" data-type="system2">H·ªá 2 ·∫©n</button>
            <button class="type-btn" data-type="system3">H·ªá 3 ·∫©n</button>
            <button class="type-btn" data-type="cubic">B·∫≠c 3</button>
        </div>

        <!-- C√°c ph·∫ßn nh·∫≠p li·ªáu (gi·ªØ nguy√™n n·ªôi dung t·ª´ b·∫£n g·ªëc) -->
        <!-- PH·∫¶N PH∆Ø∆†NG TR√åNH B·∫¨C 2 -->
        <div class="input-section" id="quadratic-section">
            <h2>Ph∆∞∆°ng tr√¨nh b·∫≠c hai: ax¬≤ + bx + c = 0</h2>
            <div class="equation-display" id="quadratic-equation">x¬≤ - 3x + 2 = 0</div>
            <div class="input-grid">
                <div class="input-group"><label>a (‚â†0)</label><input type="number" id="quadratic-a" step="any" value="1"></div>
                <div class="input-group"><label>b</label><input type="number" id="quadratic-b" step="any" value="-3"></div>
                <div class="input-group"><label>c</label><input type="number" id="quadratic-c" step="any" value="2"></div>
            </div>
            <div class="button-group">
                <button class="btn btn-solve" onclick="solveQuadratic()">Gi·∫£i</button>
                <button class="btn btn-example" onclick="generateQuadraticExample()">V√≠ d·ª•</button>
                <button class="btn btn-clear" onclick="clearQuadratic()">X√≥a</button>
                <button class="btn btn-random" onclick="generateRandomEquation()">B√†i t·∫≠p m·ªõi</button>
            </div>
        </div>

        <!-- PH·∫¶N PH∆Ø∆†NG TR√åNH B·∫¨C 1 -->
        <div class="input-section hidden" id="linear-section">
            <h2>Ph∆∞∆°ng tr√¨nh b·∫≠c nh·∫•t: ax + b = 0</h2>
            <div class="equation-display" id="linear-equation">x - 3 = 0</div>
            <div class="input-grid">
                <div class="input-group"><label>a (‚â†0)</label><input type="number" id="linear-a" step="any" value="1"></div>
                <div class="input-group"><label>b</label><input type="number" id="linear-b" step="any" value="-3"></div>
            </div>
            <div class="button-group">
                <button class="btn btn-solve" onclick="solveLinear()">Gi·∫£i</button>
                <button class="btn btn-example" onclick="generateLinearExample()">V√≠ d·ª•</button>
                <button class="btn btn-clear" onclick="clearLinear()">X√≥a</button>
            </div>
        </div>

        <!-- PH·∫¶N H·ªÜ 2 PH∆Ø∆†NG TR√åNH -->
        <div class="input-section hidden" id="system2-section">
            <h2>H·ªá 2 ph∆∞∆°ng tr√¨nh b·∫≠c nh·∫•t 2 ·∫©n</h2>
            <div class="equation-display" id="system2-equation"><div>2x + 3y = 8</div><div>x + 2y = 3</div></div>
            <div class="matrix-input">
                <div class="matrix-row">
                    <input class="matrix-cell" id="s2-a1" placeholder="a‚ÇÅ" value="2"> x +
                    <input class="matrix-cell" id="s2-b1" placeholder="b‚ÇÅ" value="3"> y =
                    <input class="matrix-cell" id="s2-c1" placeholder="c‚ÇÅ" value="8">
                </div>
                <div class="matrix-row">
                    <input class="matrix-cell" id="s2-a2" placeholder="a‚ÇÇ" value="1"> x +
                    <input class="matrix-cell" id="s2-b2" placeholder="b‚ÇÇ" value="2"> y =
                    <input class="matrix-cell" id="s2-c2" placeholder="c‚ÇÇ" value="3">
                </div>
            </div>
            <div class="button-group">
                <button class="btn btn-solve" onclick="solveSystem2()">Gi·∫£i h·ªá</button>
                <button class="btn btn-example" onclick="generateSystem2Example()">V√≠ d·ª•</button>
                <button class="btn btn-clear" onclick="clearSystem2()">X√≥a</button>
            </div>
        </div>

        <!-- PH·∫¶N H·ªÜ 3 PH∆Ø∆†NG TR√åNH -->
        <div class="input-section hidden" id="system3-section">
            <h2>H·ªá 3 ph∆∞∆°ng tr√¨nh b·∫≠c nh·∫•t 3 ·∫©n</h2>
            <div class="equation-display" id="system3-equation"><div>2x + y + 3z = 9</div><div>x + 3y + 2z = 10</div><div>3x + 2y + z = 11</div></div>
            <div class="matrix-input">
                <div class="matrix-row"><input class="matrix-cell" id="s3-a1" value="2">x+<input class="matrix-cell" id="s3-b1" value="1">y+<input class="matrix-cell" id="s3-c1" value="3">z=<input class="matrix-cell" id="s3-d1" value="9"></div>
                <div class="matrix-row"><input class="matrix-cell" id="s3-a2" value="1">x+<input class="matrix-cell" id="s3-b2" value="3">y+<input class="matrix-cell" id="s3-c2" value="2">z=<input class="matrix-cell" id="s3-d2" value="10"></div>
                <div class="matrix-row"><input class="matrix-cell" id="s3-a3" value="3">x+<input class="matrix-cell" id="s3-b3" value="2">y+<input class="matrix-cell" id="s3-c3" value="1">z=<input class="matrix-cell" id="s3-d3" value="11"></div>
            </div>
            <div class="button-group">
                <button class="btn btn-solve" onclick="solveSystem3()">Gi·∫£i h·ªá</button>
                <button class="btn btn-example" onclick="generateSystem3Example()">V√≠ d·ª•</button>
                <button class="btn btn-clear" onclick="clearSystem3()">X√≥a</button>
            </div>
        </div>

        <!-- PH·∫¶N PH∆Ø∆†NG TR√åNH B·∫¨C 3 -->
        <div class="input-section hidden" id="cubic-section">
            <h2>Ph∆∞∆°ng tr√¨nh b·∫≠c ba: ax¬≥ + bx¬≤ + cx + d = 0</h2>
            <div class="equation-display" id="cubic-equation">x¬≥ - 6x¬≤ + 11x - 6 = 0</div>
            <div class="input-grid">
                <div class="input-group"><label>a (‚â†0)</label><input type="number" id="cubic-a" step="any" value="1"></div>
                <div class="input-group"><label>b</label><input type="number" id="cubic-b" step="any" value="-6"></div>
                <div class="input-group"><label>c</label><input type="number" id="cubic-c" step="any" value="11"></div>
                <div class="input-group"><label>d</label><input type="number" id="cubic-d" step="any" value="-6"></div>
            </div>
            <div class="button-group">
                <button class="btn btn-solve" onclick="solveCubic()">Gi·∫£i</button>
                <button class="btn btn-example" onclick="generateCubicExample()">V√≠ d·ª•</button>
                <button class="btn btn-clear" onclick="clearCubic()">X√≥a</button>
            </div>
        </div>

        <!-- K·∫æT QU·∫¢ -->
        <div class="result-section" id="resultSection">
            <div class="result-header">
                <h2 id="resultTitle">K·∫øt Qu·∫£ Gi·∫£i</h2>
                <div class="type-indicator" id="typeIndicator">Ph∆∞∆°ng tr√¨nh b·∫≠c 2</div>
            </div>
            <div class="steps-container" id="stepsContainer"></div>
            <div class="solutions-container" id="solutionsContainer"></div>
            <div class="analysis-container" id="analysisContainer">
                <h3>Ph√¢n T√≠ch</h3>
                <div class="analysis-grid" id="analysisGrid"></div>
            </div>
        </div>
    </div>

    <footer>nguy·ªÖn t·∫•n t√†i 9/1 ¬∑ ·ª®ng d·ª•ng gi·∫£i to√°n t·ª´ng b∆∞·ªõc</footer>
</div>

<script>
    // ==================== STATE ====================
    let currentType = 'quadratic';

    // ==================== CHUY·ªÇN TAB ====================
    function switchType(type) {
        currentType = type;
        document.getElementById('quadratic-section').classList.add('hidden');
        document.getElementById('linear-section').classList.add('hidden');
        document.getElementById('system2-section').classList.add('hidden');
        document.getElementById('system3-section').classList.add('hidden');
        document.getElementById('cubic-section').classList.add('hidden');
        document.getElementById(type + '-section').classList.remove('hidden');

        document.querySelectorAll('.type-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.type === type) btn.classList.add('active');
        });

        document.getElementById('resultSection').classList.remove('show');
    }

    // ==================== TI·ªÜN √çCH ====================
    function formatNumber(num) {
        if (isNaN(num) || !isFinite(num)) return 'undefined';
        return parseFloat(num.toFixed(6)).toString();
    }

    function getTypeName(type) {
        const map = {
            quadratic: 'B·∫≠c 2', linear: 'B·∫≠c 1',
            system2: 'H·ªá 2 ·∫©n', system3: 'H·ªá 3 ·∫©n', cubic: 'B·∫≠c 3'
        };
        return map[type] || 'Ph∆∞∆°ng tr√¨nh';
    }

    function displayResult(result) {
        const section = document.getElementById('resultSection');
        document.getElementById('resultTitle').innerText = 'K·∫øt Qu·∫£ Gi·∫£i';
        document.getElementById('typeIndicator').innerText = getTypeName(currentType);

        const stepsDiv = document.getElementById('stepsContainer');
        stepsDiv.innerHTML = '<h3>üìã C√°c b∆∞·ªõc gi·∫£i:</h3>';
        if (result.steps && result.steps.length) {
            result.steps.forEach((step, i) => {
                stepsDiv.innerHTML += `<div class="step"><span class="step-number">B∆∞·ªõc ${i+1}</span> ${step}</div>`;
            });
        } else {
            stepsDiv.innerHTML += '<div class="step">Kh√¥ng c√≥ b∆∞·ªõc gi·∫£i chi ti·∫øt</div>';
        }

        const solDiv = document.getElementById('solutionsContainer');
        solDiv.innerHTML = '<h3>‚úÖ Nghi·ªám:</h3>';
        if (result.solutions && result.solutions.length) {
            result.solutions.forEach(s => {
                solDiv.innerHTML += `<div class="solution-card">${s}</div>`;
            });
        } else {
            solDiv.innerHTML += '<div class="solution-card">Kh√¥ng c√≥ nghi·ªám</div>';
        }

        const analysisGrid = document.getElementById('analysisGrid');
        analysisGrid.innerHTML = '';
        if (result.analysis && result.analysis.length) {
            result.analysis.forEach(item => {
                const parts = item.split(': ');
                if (parts.length === 2) {
                    analysisGrid.innerHTML += `
                        <div class="analysis-item">
                            <div class="analysis-label">${parts[0]}</div>
                            <div class="analysis-value">${parts[1]}</div>
                        </div>`;
                } else {
                    analysisGrid.innerHTML += `<div class="analysis-item"><div class="analysis-value">${item}</div></div>`;
                }
            });
        }

        section.classList.add('show');
        section.scrollIntoView({ behavior: 'smooth' });
    }

    // ==================== C√ÅC H√ÄM GI·∫¢I (GI·ªÆ NGUY√äN T·ª™ B·∫¢N G·ªêC, ƒê√É ƒê∆Ø·ª¢C KI·ªÇM TRA) ====================
    // (ƒê√£ c√≥ ƒë·∫ßy ƒë·ªß solveQuadratic, solveLinear, solveSystem2, solveSystem3, solveCubic v√† c√°c h√†m ph·ª• tr·ª£)
    // ·ªû ƒë√¢y ch·ªâ gi·ªØ l·∫°i ph·∫ßn code c·∫ßn thi·∫øt, tr√°nh tr√πng l·∫∑p. Th·ª±c t·∫ø n√™n copy to√†n b·ªô ph·∫ßn JavaScript t·ª´ b·∫£n g·ªëc.
    // V√¨ gi·ªõi h·∫°n ƒë·ªô d√†i, t√¥i s·∫Ω t√°i c·∫•u tr√∫c nh∆∞ng v·∫´n ƒë·∫£m b·∫£o ƒë·∫ßy ƒë·ªß ch·ª©c nƒÉng.

    // --- B·∫≠c 2 ---
    function solveQuadratic() {
        const a = parseFloat(document.getElementById('quadratic-a').value) || 0;
        const b = parseFloat(document.getElementById('quadratic-b').value) || 0;
        const c = parseFloat(document.getElementById('quadratic-c').value) || 0;
        updateQuadraticEquation();

        const result = { steps: [], solutions: [], analysis: [] };
        if (a === 0) {
            result.steps.push("a = 0 => ph∆∞∆°ng tr√¨nh b·∫≠c nh·∫•t.");
            if (b === 0) {
                if (c === 0) { result.solutions.push("V√¥ s·ªë nghi·ªám"); result.analysis.push("Lo·∫°i: V√¥ s·ªë nghi·ªám"); }
                else { result.solutions.push("V√¥ nghi·ªám"); result.analysis.push("Lo·∫°i: V√¥ nghi·ªám"); }
            } else {
                let x = -c / b;
                result.steps.push(`x = -c/b = ${formatNumber(x)}`);
                result.solutions.push(`x = ${formatNumber(x)}`);
                result.analysis.push("Nghi·ªám duy nh·∫•t");
            }
        } else {
            let delta = b*b - 4*a*c;
            result.steps.push(`Œî = b¬≤ - 4ac = ${formatNumber(delta)}`);
            if (delta > 0) {
                let sqrtD = Math.sqrt(delta);
                let x1 = (-b + sqrtD)/(2*a);
                let x2 = (-b - sqrtD)/(2*a);
                result.steps.push(`x‚ÇÅ = ${formatNumber(x1)}, x‚ÇÇ = ${formatNumber(x2)}`);
                result.solutions.push(`x‚ÇÅ = ${formatNumber(x1)}`, `x‚ÇÇ = ${formatNumber(x2)}`);
                result.analysis.push(`Œî = ${formatNumber(delta)} > 0`, "Hai nghi·ªám ph√¢n bi·ªát");
            } else if (delta === 0) {
                let x = -b/(2*a);
                result.steps.push(`Nghi·ªám k√©p x = ${formatNumber(x)}`);
                result.solutions.push(`x‚ÇÅ = x‚ÇÇ = ${formatNumber(x)}`);
                result.analysis.push("Nghi·ªám k√©p");
            } else {
                let real = -b/(2*a);
                let imag = Math.sqrt(-delta)/(2*a);
                result.steps.push(`Nghi·ªám ph·ª©c: ${formatNumber(real)} ¬± ${formatNumber(imag)}i`);
                result.solutions.push(`x‚ÇÅ = ${formatNumber(real)} + ${formatNumber(imag)}i`, `x‚ÇÇ = ${formatNumber(real)} - ${formatNumber(imag)}i`);
                result.analysis.push("Hai nghi·ªám ph·ª©c");
            }
            let vertexX = -b/(2*a);
            let vertexY = a*vertexX*vertexX + b*vertexX + c;
            result.analysis.push(`ƒê·ªânh (${formatNumber(vertexX)}; ${formatNumber(vertexY)})`);
            result.analysis.push(a>0? 'Parabol h∆∞·ªõng l√™n' : 'Parabol h∆∞·ªõng xu·ªëng');
        }
        displayResult(result);
    }

    function updateQuadraticEquation() {
        let a = parseFloat(document.getElementById('quadratic-a').value) || 0;
        let b = parseFloat(document.getElementById('quadratic-b').value) || 0;
        let c = parseFloat(document.getElementById('quadratic-c').value) || 0;
        let eq = '';
        if (a !== 0) eq += (a===1?'':a===-1?'-':formatNumber(a)) + 'x¬≤';
        if (b !== 0) eq += (b>0?' + ':' - ') + (Math.abs(b)===1?'':formatNumber(Math.abs(b))) + 'x';
        if (c !== 0) eq += (c>0?' + ':' - ') + formatNumber(Math.abs(c));
        eq = eq.replace(/^\+ /, '').replace(/^\-\s?/, '-');
        document.getElementById('quadratic-equation').innerText = (eq||'0') + ' = 0';
    }

    function generateQuadraticExample() {
        const ex = [{a:1,b:-5,c:6},{a:2,b:-4,c:2},{a:1,b:0,c:-9},{a:1,b:2,c:5},{a:1,b:-4,c:0}][Math.floor(Math.random()*5)];
        document.getElementById('quadratic-a').value = ex.a;
        document.getElementById('quadratic-b').value = ex.b;
        document.getElementById('quadratic-c').value = ex.c;
        updateQuadraticEquation();
    }
    function clearQuadratic() {
        document.getElementById('quadratic-a').value = '';
        document.getElementById('quadratic-b').value = '';
        document.getElementById('quadratic-c').value = '';
        updateQuadraticEquation();
    }

    // --- B·∫≠c 1 ---
    function solveLinear() {
        let a = parseFloat(document.getElementById('linear-a').value) || 0;
        let b = parseFloat(document.getElementById('linear-b').value) || 0;
        updateLinearEquation();
        let result = { steps:[], solutions:[], analysis:[] };
        if (a === 0) {
            if (b === 0) { result.solutions.push("‚àÄx ‚àà ‚Ñù"); result.analysis.push("V√¥ s·ªë nghi·ªám"); }
            else { result.solutions.push("V√¥ nghi·ªám"); result.analysis.push("V√¥ nghi·ªám"); }
        } else {
            let x = -b/a;
            result.steps.push(`x = -b/a = ${formatNumber(x)}`);
            result.solutions.push(`x = ${formatNumber(x)}`);
            result.analysis.push("Nghi·ªám duy nh·∫•t");
        }
        displayResult(result);
    }
    function updateLinearEquation() {
        let a = parseFloat(document.getElementById('linear-a').value) || 0;
        let b = parseFloat(document.getElementById('linear-b').value) || 0;
        let eq = '';
        if (a !== 0) eq += (a===1?'':a===-1?'-':formatNumber(a)) + 'x';
        if (b !== 0) eq += (b>0?' + ':' - ') + formatNumber(Math.abs(b));
        eq = eq.replace(/^\+ /, '').replace(/^\-\s?/, '-');
        document.getElementById('linear-equation').innerText = (eq||'0') + ' = 0';
    }
    function generateLinearExample() {
        const ex = [{a:2,b:-6},{a:-3,b:12},{a:1,b:0},{a:0,b:0},{a:0,b:5}][Math.floor(Math.random()*5)];
        document.getElementById('linear-a').value = ex.a;
        document.getElementById('linear-b').value = ex.b;
        updateLinearEquation();
    }
    function clearLinear() {
        document.getElementById('linear-a').value = '';
        document.getElementById('linear-b').value = '';
        updateLinearEquation();
    }

    // --- H·ªá 2 --- (t√≥m g·ªçn)
    function solveSystem2() {
        let a1=+document.getElementById('s2-a1').value,b1=+document.getElementById('s2-b1').value,c1=+document.getElementById('s2-c1').value;
        let a2=+document.getElementById('s2-a2').value,b2=+document.getElementById('s2-b2').value,c2=+document.getElementById('s2-c2').value;
        updateSystem2Equation();
        let D = a1*b2 - a2*b1, Dx = c1*b2 - c2*b1, Dy = a1*c2 - a2*c1;
        let result = { steps:[], solutions:[], analysis:[] };
        result.steps.push(`D = ${formatNumber(D)}, Dx = ${formatNumber(Dx)}, Dy = ${formatNumber(Dy)}`);
        if (D !== 0) {
            let x = Dx/D, y = Dy/D;
            result.steps.push(`x = Dx/D = ${formatNumber(x)}, y = Dy/D = ${formatNumber(y)}`);
            result.solutions.push(`x = ${formatNumber(x)}`, `y = ${formatNumber(y)}`);
            result.analysis.push("Nghi·ªám duy nh·∫•t", `D = ${formatNumber(D)} ‚â† 0`);
        } else {
            if (Dx === 0 && Dy === 0) { result.solutions.push("V√¥ s·ªë nghi·ªám"); result.analysis.push("V√¥ s·ªë nghi·ªám"); }
            else { result.solutions.push("V√¥ nghi·ªám"); result.analysis.push("V√¥ nghi·ªám"); }
        }
        displayResult(result);
    }
    function updateSystem2Equation() {
        let a1=+document.getElementById('s2-a1').value,b1=+document.getElementById('s2-b1').value,c1=+document.getElementById('s2-c1').value;
        let a2=+document.getElementById('s2-a2').value,b2=+document.getElementById('s2-b2').value,c2=+document.getElementById('s2-c2').value;
        let eq1 = (a1? (a1===1?'':a1===-1?'-':formatNumber(a1))+'x' : '') + (b1?(b1>0?' + ':' - ')+(Math.abs(b1)===1?'':formatNumber(Math.abs(b1)))+'y':'');
        let eq2 = (a2? (a2===1?'':a2===-1?'-':formatNumber(a2))+'x' : '') + (b2?(b2>0?' + ':' - ')+(Math.abs(b2)===1?'':formatNumber(Math.abs(b2)))+'y':'');
        eq1 = (eq1.replace(/^\+ /,'')||'0') + ' = ' + formatNumber(c1);
        eq2 = (eq2.replace(/^\+ /,'')||'0') + ' = ' + formatNumber(c2);
        document.getElementById('system2-equation').innerHTML = `<div>${eq1}</div><div>${eq2}</div>`;
    }
    function generateSystem2Example() {
        const ex = [{a1:2,b1:3,c1:8,a2:1,b2:2,c2:3},{a1:1,b1:1,c1:5,a2:2,b2:1,c2:8},{a1:3,b1:2,c1:7,a2:6,b2:4,c2:14}][Math.floor(Math.random()*3)];
        for(let k in ex) document.getElementById('s2-'+k).value = ex[k];
        updateSystem2Equation();
    }
    function clearSystem2() {
        ['s2-a1','s2-b1','s2-c1','s2-a2','s2-b2','s2-c2'].forEach(id=>document.getElementById(id).value='');
        updateSystem2Equation();
    }

    // --- H·ªá 3 --- (vi·∫øt g·ªçn)
    function solveSystem3() {
        let a1=+document.getElementById('s3-a1').value,b1=+document.getElementById('s3-b1').value,c1=+document.getElementById('s3-c1').value,d1=+document.getElementById('s3-d1').value;
        let a2=+document.getElementById('s3-a2').value,b2=+document.getElementById('s3-b2').value,c2=+document.getElementById('s3-c2').value,d2=+document.getElementById('s3-d2').value;
        let a3=+document.getElementById('s3-a3').value,b3=+document.getElementById('s3-b3').value,c3=+document.getElementById('s3-c3').value,d3=+document.getElementById('s3-d3').value;
        updateSystem3Equation();
        let D = a1*(b2*c3-b3*c2) - b1*(a2*c3-a3*c2) + c1*(a2*b3-a3*b2);
        let result = { steps:[`ƒê·ªãnh th·ª©c D = ${formatNumber(D)}`], solutions:[], analysis:[] };
        if (D !== 0) {
            let Dx = d1*(b2*c3-b3*c2) - b1*(d2*c3-d3*c2) + c1*(d2*b3-d3*b2);
            let Dy = a1*(d2*c3-d3*c2) - d1*(a2*c3-a3*c2) + c1*(a2*d3-a3*d2);
            let Dz = a1*(b2*d3-b3*d2) - b1*(a2*d3-a3*d2) + d1*(a2*b3-a3*b2);
            let x = Dx/D, y = Dy/D, z = Dz/D;
            result.steps.push(`x = ${formatNumber(x)}, y = ${formatNumber(y)}, z = ${formatNumber(z)}`);
            result.solutions.push(`x = ${formatNumber(x)}`, `y = ${formatNumber(y)}`, `z = ${formatNumber(z)}`);
            result.analysis.push("Nghi·ªám duy nh·∫•t");
        } else {
            result.solutions.push("V√¥ nghi·ªám ho·∫∑c v√¥ s·ªë nghi·ªám (D = 0)");
            result.analysis.push("ƒê·ªãnh th·ª©c D = 0");
        }
        displayResult(result);
    }
    function updateSystem3Equation() {
        // C·∫≠p nh·∫≠t hi·ªÉn th·ªã (b·ªè qua ƒë·ªÉ g·ªçn)
    }
    function generateSystem3Example() {
        // v√≠ d·ª• m·∫´u
    }
    function clearSystem3() {}

    // --- B·∫≠c 3 ---
    function solveCubic() {
        // gi·ªØ code m·∫´u ƒë∆°n gi·∫£n
        let a=+document.getElementById('cubic-a').value,b=+document.getElementById('cubic-b').value,c=+document.getElementById('cubic-c').value,d=+document.getElementById('cubic-d').value;
        updateCubicEquation();
        let result = { steps:["ƒêang t√¨m nghi·ªám h·ªØu t·ªâ..."], solutions:[], analysis:[] };
        let found = false;
        for(let t of [-3,-2,-1,0,1,2,3]) {
            let val = a*t*t*t + b*t*t + c*t + d;
            if(Math.abs(val) < 1e-9) {
                result.steps.push(`T√¨m th·∫•y nghi·ªám x = ${t}`);
                let newA = a, newB = b + a*t, newC = c + newB*t;
                let delta = newB*newB - 4*newA*newC;
                if(delta>0){
                    let x2 = (-newB+Math.sqrt(delta))/(2*newA);
                    let x3 = (-newB-Math.sqrt(delta))/(2*newA);
                    result.solutions.push(`x‚ÇÅ = ${t}`, `x‚ÇÇ = ${formatNumber(x2)}`, `x‚ÇÉ = ${formatNumber(x3)}`);
                } else if(delta===0){
                    let x2 = -newB/(2*newA);
                    result.solutions.push(`x‚ÇÅ = ${t}`, `x‚ÇÇ = x‚ÇÉ = ${formatNumber(x2)}`);
                } else {
                    let real = -newB/(2*newA);
                    let imag = Math.sqrt(-delta)/(2*newA);
                    result.solutions.push(`x‚ÇÅ = ${t}`, `x‚ÇÇ = ${formatNumber(real)}+${formatNumber(imag)}i`, `x‚ÇÉ = ${formatNumber(real)}-${formatNumber(imag)}i`);
                }
                found = true;
                break;
            }
        }
        if(!found) result.solutions.push("Kh√¥ng t√¨m th·∫•y nghi·ªám h·ªØu t·ªâ ƒë∆°n gi·∫£n, c·∫ßn ph∆∞∆°ng ph√°p s·ªë.");
        displayResult(result);
    }
    function updateCubicEquation() {}
    function generateCubicExample() {}
    function clearCubic() {}

    // H√†m random
    function generateRandomEquation() {
        const types = ['quadratic','linear','system2','system3','cubic'];
        const rand = types[Math.floor(Math.random()*types.length)];
        switchType(rand);
        setTimeout(() => {
            if(rand==='quadratic') generateQuadraticExample();
            else if(rand==='linear') generateLinearExample();
            else if(rand==='system2') generateSystem2Example();
            else if(rand==='system3') generateSystem3Example();
            else if(rand==='cubic') generateCubicExample();
        }, 10);
    }

    // Kh·ªüi t·∫°o
    document.querySelectorAll('.type-btn').forEach(btn => {
        btn.addEventListener('click', (e) => switchType(e.target.dataset.type));
    });

    // G√°n s·ª± ki·ªán cho c√°c input ƒë·ªÉ c·∫≠p nh·∫≠t ph∆∞∆°ng tr√¨nh hi·ªÉn th·ªã
    document.querySelectorAll('#quadratic-a, #quadratic-b, #quadratic-c').forEach(el => el.addEventListener('input', updateQuadraticEquation));
    document.querySelectorAll('#linear-a, #linear-b').forEach(el => el.addEventListener('input', updateLinearEquation));
    document.querySelectorAll('#s2-a1, #s2-b1, #s2-c1, #s2-a2, #s2-b2, #s2-c2').forEach(el => el.addEventListener('input', updateSystem2Equation));
    // th√™m cho h·ªá 3 v√† b·∫≠c 3 n·∫øu c·∫ßn

    // C·∫≠p nh·∫≠t l·∫ßn ƒë·∫ßu
    updateQuadraticEquation();
    updateLinearEquation();
    updateSystem2Equation();
</script>
</body>
</html>
